<ul class="absolute top-full left-0 bg-white border rounded shadow-md w-48 z-50">
  {% for child in children %}
    <li class="relative" x-data="{ open: false }">
      <div class="flex justify-between items-center px-4 py-2 hover:bg-gray-100 text-sm">
        <a href="{{ child.get_absolute_url }}"
           class="whitespace-nowrap grow"
           {% if child.type == 'external' %} target="_blank" rel="noopener noreferrer" {% endif %}>
          {{ child.name }}
        </a>

        {% if child.children.exists %}
          <button @click="open = !open" class="ml-2 text-gray-500 hover:text-gray-700 focus:outline-none">
            <svg :class="{ 'rotate-90': open }" class="w-3 h-3 transform transition-transform" fill="none"
                 stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 5l7 7-7 7" />
            </svg>
          </button>
        {% endif %}
      </div>

      {% if child.children.exists %}
        <ul x-show="open" x-transition class="absolute top-0 left-full bg-white border rounded shadow-md w-48 z-50">
          {% include 'partials/menu_children.html' with children=child.children.all %}
        </ul>
      {% endif %}
    </li>
  {% endfor %}
</ul>