{% extends "base.html" %}
{% load static %}
{% block content %}

<section class="text-center py-20 px-6 bg-white">
    <div class="swiper mySwiper"> {# This div will be the Swiper container #}
    <div class="swiper-wrapper"> {# This div holds all your individual slides #}

        {% for banner in banners %}
           <section class="swiper-slide text-center py-20 px-6 bg-white">
              <h1 class="font-satoshi font-medium text-[50px] text-[#0F1324] mb-4 max-w-5xl mx-auto leading-tight">
                {{ banner.title}}
            </h1>
            <p class="text-gray-600 max-w-4xl mx-auto mb-6">
                {{ banner.description }}
            </p>
            <div class="space-x-4">
                {% if banner.button1_text and banner.button1_link %}
                   <a href = "#" class = "bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors duration-300 shadow-md flex-shrink-0">{{ banner.button1_text }}</a>
                {% endif %}

                {% if banner.button2_text and banner.button2_link %}
                   <a href = "#" class = "bg-white text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-100 transition-colors duration-300 shadow-md flex-shrink-0 border border-gray-300">{{ banner.button2_text }}</a>
                {% endif %}
            </div>
           </section>
        {% endfor %}
    <div class="swiper-pagination"></div>

    <div class="swiper-button-prev text-gray-300 hover:text-gray-800 transition-colors duration-300"></div>
    <div class="swiper-button-next text-gray-300 hover:text-gray-800 transition-colors duration-300"></div>

    </div>
    </div>
</section>


    <!-- SME Development Steps Section -->
<section class="bg-gray-50 py-16 relative overflow-hidden">
    <div class="max-w-6xl mx-auto px-4 flex flex-col lg:flex-row items-start lg:space-x-12"> {# Parent flex container for columns #}

        <div class="lg:w-1/3 mb-10 lg:mb-0"> {# This div acts as the left column #}
            <h2 class="font-inter text-4xl font-bold text-gray-900 mb-4 whitespace-nowrap">SME Development Steps</h2>
            <p class="text-lg text-gray-600 mb-6">A step-by-step path designed to guide you through your business journey.</p>
            <a href="https://example.com" class="bg-blue-600 text-white px-5 py-2 rounded hover:bg-blue-700 inline-block">
               Get started
            </a>
        </div>

        {# Changed height to allow more vertical space for the curve to display correctly #}
        <div class="realtive max-w-6xl mx-auto h-auto md:h-[550px] mt-16 lg:mt-0"> 
            {# REMOVED preserveAspectRatio="none" to ensure the curve maintains its correct shape #}
            <svg class="absolute top-0 left-0 w-full h-full z-0" viewBox="3 -48 1388 829">
                <path d="M -2 505 C 175 677 368 505 483 421 S 881 458 984 304 S 1057 -48 1391 4"
                      fill="none"
                      stroke="#ff7f50" {# Orange color for the line #}
                      stroke-width="4" />
            </svg>

        {% for step in steps %}
           {% if step.order == 1 %}
              <div class="absolute flex flex-col items-center text-center z-10" 
                    style="left: 20%; top: 80%; transform: translate(-50%, -50%);">

           {% elif step.order == 2 %}
              <div class="absolute flex flex-col items-center text-center z-10"
                    style="left: 42%; top: 60%; transform: translate(-50%, -50%);">

           {% elif step.order == 3 %}
               <div class="absolute flex flex-col items-center text-center z-10"
                    style="left: 65%; top: 50%; transform: translate(-50%, -50%);">

           {% elif step.order == 4 %}
               <div class="absolute flex flex-col items-center text-center z-10"
                    style="right: 20%; top: 11%; transform: translate(50%, -50%);">
           {% endif %}
                <img src="/{{step.icon}}" alt="{{step.title}} Icon" class="h-16 w-16 mb-2">
                <h3 class="font-semibold text-gray-900 mb-1">{{ step.title }}</h3>
                <p class="text-sm text-gray-700 max-w-[150px]">{{ step.description}}</p>
            </div>
        {% endfor %}
    </div>
</div>

    <div class="absolute bottom-0 left-0 w-full h-24" style="pointer-events: none;">
        <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="w-full h-full">
            <path d="M0,0 C20,50 80,50 100,0 L100,100 L0,100 Z" fill="#F5F8FF"></path>
        </svg>
    </div>
</section>
{% comment  %}[#F5F8FF]{% endcomment %}
<section class="relative bg-[#F5F8FF] px-6 pt-16 pb-40 overflow-hidden">

  <div class="text-center mb-8">
    <h2 class="text-3xl font-bold text-gray-900 mb-4">Our Services</h2>
    <p class="text-lg text-gray-600">Access business development resources, apply for government support schemes, and grow your enterprise.</p>
  </div>

  <div class="container mx-auto px-4 relative z-10 flex items-center">

    <!-- Services grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 flex-grow">
      {% for service in services %}
        <a href="{% url 'dashboard:service_detail' service.pk %}" class="block bg-white rounded-xl shadow-md p-6 flex flex-col items-start border border-gray-200 hover:shadow-lg transition-shadow duration-300">
          <div class="w-12 h-12 p-2 rounded-lg mb-4 flex items-center justify-center bg-gray-100">
            <img src="{{service.icon.url}}" alt="{{ service.title }}" class="w-8 h-8" onerror="this.onerror=null;this.src='https://placehold.co/32x32/E0E0E0/808080?text=Icon';">
          </div>
          {% if service.tag %}
            <span class="text-sm text-gray-500 mb-2">{{ service.tag }}</span>
          {% endif %}
          <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ service.title }}</h3>
          <p class="text-base text-gray-600">{{ service.subtitle }}</p>
        </a>
      {% endfor %}
    </div>


    <!-- Arrow button outside the services grid -->
    <div class="ml-4">
      <a href="{% url 'dashboard:service_list' %}" aria-label="See all services" class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-300">
        <!-- Right arrow icon SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>
  </div>

    <div class="absolute bottom-0 left-0 w-full h-40 overflow-hidden" style="pointer-events: none;">
        <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="w-full h-full" style="transform: scaleY(-1);"> {# Added transform: scaleY(-1) to flip it upside down #}
            {# The path will now be flipped vertically. Fill color matches the background of the section BELOW this section #}
            <path d="M0,0 L0,100 C 30,50 70,50 100,100 L100,0 Z" fill="white"></path>
        </svg>
    </div>
</section>

<!-- New Section: SME Guidelines -->
<section class="bg-white py-16 relative overflow-hidden">
    <div class="max-w-7xl mx-auto flex flex-col lg:flex-row items-start lg:items-center lg:space-x-12">
        <!-- Left Column: Title and Description -->
        <div class="lg:w-1/3 mb-10 lg:mb-0">
            <h2 class="text-4xl font-bold text-gray-800 mb-4">SME Guidelines</h2>
            <p class="text-lg text-gray-600">Find practical guidelines, eligibility criteria, and step-by-step instructions to help SMEs and BDSPs navigate services, access resources, and make the most of this platform.</p>
        </div>

        <!-- Right Column: Dynamic Grid of Cards -->
        <div class="lg:w-2/3 grid grid-cols-1 md:grid-cols-2 gap-8">
            {% for guideline in guidelines %}
                <div class="bg-white rounded-xl shadow-md p-6 border border-gray-200">
                    <div class="w-12 h-12 p-2 rounded-lg mb-4 flex items-center justify-center bg-gray-100">
                        <img src="/{{ guideline.icon}}" alt="Icon" class="w-8 h-8" onerror="this.onerror=null;this.src='https://placehold.co/32x32/E0E0E0/808080?text=Icon';">
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ guideline.title }}</h3>
                    <p class="text-base text-gray-600">{{ guideline.description }}</p>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<!--NEws amd Events-->
<!-- News and Events -->
<section class="bg-gray-50 py-16 px-6">
  <div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="flex justify-between items-center mb-10">
      <h2 class="text-4xl font-bold text-gray-900">Our News & Events</h2>
      <a href="{% url 'dashboard:news_list' %}" class="bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition duration-300 text-lg shadow-md">
        See All Events Posts
      </a>
    </div>

    <!-- Main Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Big News Section (2 main events) -->
      <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-8">
        {% for event in news_events|slice:":2" %}
        <a href="{% url 'dashboard:news_detail' event.id %}" class="block overflow-hidden relative hover:shadow-lg hover:scale-[1.01] transition duration-300 rounded-xl">
          <img src="{{ event.image.url }}" alt="Event Image" class="w-full h-48 object-cover rounded-xl">
          <div class="mt-4">
            <p class="text-sm text-gray-500 mb-1">
              {{ event.start_date|date:"M d, Y" }} - {{ event.location }}
            </p>
            <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ event.title }}</h3>
            <p class="text-base text-gray-700">{{ event.content|truncatewords:20 }}</p>
          </div>

          <!-- Tag -->
          {% if event.is_webinar and event.start_date > today %}
            <span class="absolute top-4 right-4 bg-yellow-500 text-white text-xs px-2 py-1 rounded">Coming Soon</span>
          {% elif event.is_webinar %}
            <span class="absolute top-4 right-4 bg-purple-600 text-white text-xs px-2 py-1 rounded">Webinar</span>
          {% else %}
            <span class="absolute top-4 right-4 bg-blue-600 text-white text-xs px-2 py-1 rounded">News</span>
          {% endif %}
        </a>
        {% endfor %}
      </div>

      <!-- Small News List -->
      <div class="lg:col-span-1">
         {% for event in news_events|slice:"2:" %}
         <a href="{% url 'dashboard:news_detail' event.id %}" class="block">
           <div class="flex items-center py-3 relative hover:bg-gray-100 rounded-md px-2 transition">
           <img src="{{ event.image.url }}" alt="News Thumbnail" class="w-24 h-16 object-cover rounded-md mr-4">
             <div>
                <p class="text-xs text-gray-500 mb-1">
                  {{ event.start_date|date:"M d, Y" }} · {{ event.is_webinar|yesno:"Webinar,News" }}
                </p>
                <h4 class="text-base font-semibold text-gray-900">{{ event.title|truncatewords:8 }}</h4>
              </div>

              {% if event.is_webinar and event.start_date > today %}
                 <span class="absolute top-2 right-2 bg-yellow-500 text-white text-[10px] px-1.5 py-0.5 rounded">Coming Soon</span>
              {% endif %}
            </div>
          </a>
          {% if not forloop.last %}
          <hr class="border-gray-200 my-2">
          {% endif %}
          {% endfor %}
        </div>
     </div>
  </div>
</section>




<div id="popup-container"
     class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 opacity-0 pointer-events-none transition-opacity duration-300"
     style="display: none;">
</div>

<!-- POPUP CONTENT BOXES STORED AS TEMPLATES -->
<div id="popup-templates" class="hidden">
  {% for notice in popup_notices %}
    <div class="popup-notice"
         data-title="{{ notice.title|escapejs }}"
         data-content="{{ notice.content|linebreaksbr|escapejs }}"
         {% if notice.image %}
           data-image="{{ notice.image.url }}"
         {% else %}
           data-image=""
         {% endif %}
         {% if notice.pdf %}
           data-pdf="{{ notice.pdf.url }}"
         {% else %}
           data-pdf=""
         {% endif %}
         {% if notice.pdf %}
            data-url="{{ notice.get_absolute_url }}"
         {% endif %}>
    </div>
  {% endfor %}
</div>


{% endblock %}
